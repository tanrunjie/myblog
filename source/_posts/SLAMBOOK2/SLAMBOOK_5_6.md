---
title: LSAMBOOK_5_6
categories:
  - SLAMBOOK
mathjax: true
date: 2022-03-04 17:30:33
tags: SLAMBOOK
---

### 相机与图像
本章目标：
- 理解针孔模型、内参以及径向畸变参数
- 理解空间点如何投影到相机成像平面
- 掌握OpenCV图像存储与表达
- 掌握基本的摄像头标定方法

#### 针孔模型
三维空间点与相机成像平面建模关系
$$\frac{Z}{f} =  \frac{X}{X^,} = \frac{Y}{Y^,}$$

像素坐标系与成像平面间相差了一个**缩放**和**原点的平移**： $u = \alpha X^, + c_x, v=\beta Y^, + c_y$

将空间点与成像平面的公式代入，习惯性把Z左挪得到下式
![](images/03_04_1.png).其中f单位为米，$\alpha，\beta$单位为像素每米，$f_x,f_y$单位为像素。K为相机内参，通常厂商会帮你标定给出，有时候需要自己确定或精细测量，就是**摄像头标定**。

为了更好成像效果，通常加入透镜，因此带来影响：1.透镜自身形状对光线传播的影响；2.机械组装透镜与成像平面不可能完全平行； 因此引入径向畸变和桶形畸变，它们引入的畸变均随着离中心的距离增加而增加。

纠正畸变过程：
- 1.将三维空间点投影到归一化图像平面，坐标为$[x,y]^T$
- 2.归一化平面的点进行经过5个参数进行径向和切向畸变校正：
$$x_{corrected} = x(1+k_1r^2+k_2r^4+k_3r^6) +2p_1xy +p_2(r^2+2x^2) $$
$$y_{corrected} = y(1+k_1r^2 +k_2r^4+k_3r^6)+p_1(r^2+2y^2)+2p_2xy$$
- 3.纠正后的点通过内参矩阵投影到像素平面，得到图像上正确的位置，生成新的纠正后的图像
$$u=f_xx_{corrected}+c_x$$
$$v=f_yy_{corrected}+c_y$$

总结单目相机成像过程：
- 1.首先世界坐标系下有一个固定点P，世界坐标为$P_w$
- 2.由于相机在运动，它运动由R,t或者变换矩阵T描述。P的相机坐标为$\hat{P_c} = RP_w +t$
- 3.此时$\hat{P_c}$仍由X，Y，Z三个量表示，需要投影到归一化平面Z=1上，得到P的归一化相机坐标：$P_c=[X/Z,Y/Z,1]^T$
- 4.最后将归一化坐标经过内参对应到像素坐标：$P_{uv}=KP_c$


个人思考：归一化坐标主要因为内参标定建立在一个参考平面，最general的就是建立在z=1米的参考平面上。这是由内参标定的参考平面决定的。